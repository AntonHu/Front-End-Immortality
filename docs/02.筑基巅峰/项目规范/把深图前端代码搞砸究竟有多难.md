# 把深图前端代码搞砸究竟有多难

在深服前端项目中，为了约束代码规范、统一编码风格、提升coding质量、保证运行安全，我们做了如下惨绝人寰、毫无人性的前端工程化：

`eslint`：设定代码风格，再风骚的你也得写优雅的代码，不允许写风格不一致的代码；

`tslint`：强制类型安全，人妖来了也要有唯一的性别，不允许没有明确类型的定义；

`stylelint`：设定样式风格，管你衰样丑样，不允许样式写的不一样；

`.editorconfig`：设定文档编写风格，几个空格，几个回车，几个标点符号都得听它的；

`prettier`：自动格式化代码，不遵守以上规定的，强制帮你改；

`commitlint`：代码每一次提交，都必须写规范的有意义的改动说明；

`husky`：拦截代码提交，强制检查以上规则，不错放任何一条违规；

![image-20250914015605032](https://image.antoncook.xyz/picList/2025/09/28accf2f7692ca4b036193a48c2bf32e.png)

## 第1关：编码过程逼死强迫症

首先你来到第1关，但凡有一点不规范、不优雅、不安全，五彩斑斓亮瞎你的眼！

### 取名如孩，必有寓意

变量、函数、类型取名必须要是正确的、有实际业务意义的英文单词；

好处：不能写别人看不懂的代码，光从名字就能联想到代码的作用；

![image-20250914022035099](https://image.antoncook.xyz/picList/2025/09/5a8e316fbcb7d2596bef89df38689722.png)

### 类型如妻，必须专一

变量、函数、参数、类、接口都必须明确的给定类型；

好处：有错提前报，代码更易懂，安全性保障；

![image-20250914022247621](https://image.antoncook.xyz/picList/2025/09/16332fec355b474d4678dd8832dbd01b.png)

### 细如毛丝，毫厘不差

函数参数、返回值、对象属性必须毫厘不差完全一致；

好处：不管字段有多少，一个不落别想跑，bug减少了不少；

![image-20250914030930756](https://image.antoncook.xyz/picList/2025/09/52372bbfaac567f7c567a9f5d3282c63.png)

### 用须守法，违法必究

API使用，框架使用必须符合行业标准规范；

好处：不能乱用API，乱用框架语言；

![image-20250914023020230](https://image.antoncook.xyz/picList/2025/09/42316bedf27190a37c95d0a9f85e01fb.png)

### 节点监控，去哪都控

多数据的内容，必须设定追踪标识，变动时快速找到；

好处：页面交互更流畅，随心所变性能高；

![image-20250914023145989](https://image.antoncook.xyz/picList/2025/09/3f56c920fc28f61338551fdb7250e02b.png)

### 引用如典，按序书写

模块导入，代码引用，必须按序既定顺序一行也不能乱；

好处：代码顺序清晰，查找迅速；

![image-20250914023341576](https://image.antoncook.xyz/picList/2025/09/6aed9c5ee0af7c38fffc9b834fc27b13.png)

还有很多很多规范，就不一一列举。

## 第2关，保存代码强制修改

强忍着强迫症发作的你，来到了第2关，好不容易写了一坨，一键保存回到解放前。

（保存代码会自动校验规范，将不规范的地方自动调整成符合规范风格的写法）

![Kapture 2025-09-14 at 03.23.32](https://image.antoncook.xyz/picList/2025/09/dcd47b8ea50eff4fb6265b38ec39d7f6.gif)

## 第3关，提交代码六亲不认

1. 避开所有高级文档编辑器，你打开了记事本/备忘录来手写代码，终于逃过了强制修改，恭喜来到第3关，你兴奋的发起提交代码指令。

（代码提交会检查每一条规范安全规则，有一条不符合都会被拒绝提交）

![image-20250914024821844](https://image.antoncook.xyz/picList/2025/09/2fdcfe77e36fd5caa2aa14bee1073e7b.png)



2. 你不得不改成规范的代码，但是气不过，于是决定不告诉别人你改了什么留下地雷。

![image-20250914030113708](https://image.antoncook.xyz/picList/2025/09/107cdd4ab94ddff7173f9548e30c83a3.png)

## 第4关，打包项目怀疑人生

机智的你把代码复制粘贴到代码仓库，终于避开了代码提交的检查，这下可以功成身退了吧，结果项目打包检查不通过。

![image-20250914030411358](https://image.antoncook.xyz/picList/2025/09/c126bf72ffa144a6839e2ebcb7267178.png)

至此，你不得不放弃搞砸深图前端代码的想法，代码风骚成为你一生的宿敌，优雅成为你一生的宗旨；

更多关于前端规范、工程化的技术方案和实现细节，可以看我博客里的 [《前端项目规范工程化》](./前端项目规范工程化)
